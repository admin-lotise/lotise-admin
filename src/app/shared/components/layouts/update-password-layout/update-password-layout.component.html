<div class="update-password-container">
  <div class="update-left">
    <div class="update-brand">
      <div class="brand-logo">
        <span class="logo-icon">L</span>
      </div>
      <h1 class="brand-title">Lotise Admin</h1>
      <p class="brand-subtitle">Actualiza tu contraseña para continuar</p>
    </div>
    <div class="update-illustration">
      <svg viewBox="0 0 400 300" class="illustration-svg">
        <circle cx="200" cy="150" r="80" fill="#3b82f6" opacity="0.1"/>
        <circle cx="200" cy="150" r="60" fill="#3b82f6" opacity="0.2"/>
        <circle cx="200" cy="150" r="40" fill="#3b82f6" opacity="0.3"/>
      </svg>
    </div>
  </div>

  <div class="update-right">
    <div class="update-form-wrapper">
      <div class="update-header">
        <h2 class="update-title">Actualizar Contraseña</h2>
        <p class="update-subtitle">Por seguridad, debes establecer una nueva contraseña.</p>
      </div>
      <form [formGroup]="updatePasswordForm" (ngSubmit)="onSubmit()" class="update-form">
        @if (errorMessage) {
          <div class="error-message form-error">{{ errorMessage }}</div>
        }
        <!-- Mensaje de éxito -->
        <div *ngIf="successMessage" class="alert alert-success" role="alert">
          <i class="bi bi-check-circle-fill me-2"></i>
          {{ successMessage }}
          <div class="mt-2">
            <small class="text-muted">
              <i class="bi bi-arrow-right me-1"></i>
              Redirigiendo al dashboard...
            </small>
          </div>
        </div>
        <div class="form-group">
          <label for="password" class="form-label">Nueva Contraseña</label>
          <input
            type="password"
            id="password"
            formControlName="password"
            class="form-input"
            [class.error]="updatePasswordForm.get('password')?.invalid && updatePasswordForm.get('password')?.touched"
            placeholder="••••••••"
          />
          @if (updatePasswordForm.get('password')?.invalid && updatePasswordForm.get('password')?.touched) {
            <span class="error-message">{{ getErrorMessage('password') }}</span>
          }
        </div>
        <div class="form-group">
          <label for="confirmPassword" class="form-label">Confirmar Contraseña</label>
          <input
            type="password"
            id="confirmPassword"
            formControlName="confirmPassword"
            class="form-input"
            [class.error]="(updatePasswordForm.get('confirmPassword')?.invalid && updatePasswordForm.get('confirmPassword')?.touched) || updatePasswordForm.hasError('mismatch')"
            placeholder="••••••••"
          />
          @if ((updatePasswordForm.get('confirmPassword')?.invalid && updatePasswordForm.get('confirmPassword')?.touched) || updatePasswordForm.hasError('mismatch')) {
            <span class="error-message">{{ getErrorMessage('confirmPassword') }}</span>
          }
        </div>
        <div class="form-actions">
          <button type="submit" class="btn-primary" [disabled]="isLoading">
            @if (isLoading) {
              <span class="spinner"></span>
              Actualizando...
            } @else {
              Actualizar Contraseña
            }
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
