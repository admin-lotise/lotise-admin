<div class="raffle-settings-container">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">
        Configuración de Rifas
      </h1>
      <p class="page-subtitle">
        Personaliza el comportamiento y apariencia de tus rifas
      </p>
    </div>
    
    @if (isLoading()) {
      <div class="reload-button loading">
        <i class="fas fa-spinner fa-spin"></i>
      </div>
    } @else {
      <button class="reload-button" (click)="reloadData()" title="Recargar datos">
        <i class="fas fa-sync-alt"></i>
      </button>
    }
  </div>

  <!-- Error Alert -->
  @if (error()) {
    <div class="alert alert-error">
      <i class="fas fa-exclamation-circle"></i>
      <span>{{ error() }}</span>
      <button class="close-btn" (click)="clearError()">
        <i class="fas fa-times"></i>
      </button>
    </div>
  }

  <!-- Loading State (Initial) -->
  @if (isLoading()) {
    <div class="loading-container">
      <div class="spinner"></div>
      <p>Cargando configuración de rifas...</p>
    </div>
  } @else {
    <!-- Tabs Navigation -->
    <div class="tabs-container">
      <div class="tabs-header">
        <button 
          class="tab-button" 
          [class.active]="activeTab() === 'general'"
          (click)="changeTab('general')">
          <i class="fas fa-cog"></i>
          <span>Configuración General</span>
        </button>
        
        <button 
          class="tab-button" 
          [class.active]="activeTab() === 'ticket'"
          (click)="changeTab('ticket')">
          <i class="fas fa-eye"></i>
          <span>Elementos Visibles</span>
        </button>

        <button 
          class="tab-button" 
          [class.active]="activeTab() === 'timing'"
          (click)="changeTab('timing')">
          <i class="fas fa-palette"></i>
          <span>Apariencia Web</span>
        </button>

        <!-- ==================== NUEVO TAB: BRANDING ==================== -->
        <button 
          class="tab-button" 
          [class.active]="activeTab() === 'branding'"
          (click)="changeTab('branding')">
          <i class="fas fa-photo-video"></i>
          <span>Branding</span>
        </button>
        <!-- ============================================================= -->
      </div>

      <!-- Tab Content -->
      <div class="tab-content">
        @switch (activeTab()) {
          @case ('general') {
            <app-general-config 
              [raffleSettings]="raffleSettings()"
              [isLoading]="isSaving()"
              (save)="onGeneralConfigSave($event)"
            />
          }
          @case ('ticket') {
            <app-ticket-settings 
              [webPageConfig]="raffleSettings().webPageConfig"
              [isLoading]="isSaving()"
              (save)="onTicketSettingsSave($event)"
            />
          }
          @case ('timing') {
            <app-timing-settings 
              [webPageConfig]="raffleSettings().webPageConfig"
              [isLoading]="isSaving()"
              (save)="onTimingSettingsSave($event)"
            />
          }
          <!-- ==================== NUEVO CASE: BRANDING ==================== -->
          @case ('branding') {
            <app-branding-settings 
              [webPageConfig]="raffleSettings().webPageConfig"
              [isLoading]="isSaving()"
              (save)="onBrandingSettingsSave($event)"
            />
          }
          <!-- ============================================================= -->
        }
      </div>
    </div>
  }
</div>